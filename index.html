<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naver Webtoon AI Picker</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { primary: '#8D6E63', bgLight: '#F5F7FA' },
                    boxShadow: { 'soft': '0 10px 40px rgba(0,0,0,0.05)', 'blue': '0 15px 45px rgba(141,110,99,0.2)' }
                }
            }
        }
    </script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #F5F7FA;
            background-image: linear-gradient(rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.7)), url('bg.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            -webkit-font-smoothing: antialiased;
        }

        .animate-up {
            animation: fadeInUp 0.5s ease-out forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .backdrop-blur-custom {
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
        }

        .modal-open {
            overflow: hidden !important;
        }

        .premium-gray-btn {
            background: #F8FAFC;
            border: 1px solid #F1F5F9;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .premium-gray-btn:hover {
            background: #F1F5F9;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
        }

        @keyframes blink {
            0% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.8;
                transform: scale(1.03);
            }

            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .animate-blink {
            animation: blink 2s infinite ease-in-out;
        }
    </style>
    <!-- Kakao SDK -->
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.0/kakao.min.js"></script>
    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
    <div id="root"></div>

    <!-- React/Babel CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="data.js"></script>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- Supabase Config ---
        const SUPABASE_URL = 'https://vxzdgyentxxipjervdzq.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ4emRneWVudHh4aXBqZXJ2ZHpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg4MjQ0ODEsImV4cCI6MjA4NDQwMDQ4MX0.HyZIWay1RI7JHVdVYpkWBTtjg9goQH4muUEaqqG6fPU';
        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        // --- Kakao Key Management ---
        const KAKAO_JS_KEY = '7716eb056c6c408381180fb2987a0279';

        const initKakao = () => {
            if (window.Kakao && !Kakao.isInitialized()) {
                try { Kakao.init(KAKAO_JS_KEY); } catch (e) { console.error("Kakao Init Failed:", e); }
            }
        };

        const TRANSLATIONS = {
            ko: {
                subtitle: "My Pick Naver WebToon(with AI)",
                process: "ë¶„ì„ í”„ë¡œì„¸ìŠ¤",
                step: "ë‹¨ê³„",
                of: "/",
                share: "ê³µìœ í•˜ê¸°",
                step1_title: "ì„ í˜¸ì·¨í–¥ì„ ê³¨ë¼ì£¼ì„¸ìš”.",
                step1_desc: "ë‹¤ì–‘í•œ ìž¥ë¥´ ì¤‘ 1ê°œ ì´ìƒ ì„ íƒì´ í•„ìˆ˜ìž…ë‹ˆë‹¤.",
                cat_status: "ì—°ìž¬ ìƒíƒœ",
                cat_genre: "ë©”ì¸ ìž¥ë¥´",
                cat_topic: "ì¸ê¸° ì†Œìž¬",
                cat_feature: "ìŠ¤í† ë¦¬ íŠ¹ì§•",
                next: "ë‹¤ìŒ ë‹¨ê³„",
                step2_title: "ë¹„ì„ í˜¸ ì·¨í–¥ì„ ê³¨ë¼ì£¼ì„¸ìš” (ì„ íƒ)",
                step2_desc: "ì„ íƒí•œ ì·¨í–¥ì´ í¬í•¨ëœ ì›¹íˆ°ì€ ì¶”ì²œì—ì„œ ì œì™¸ë©ë‹ˆë‹¤.",
                back: "ì´ì „",
                continue: "ê³„ì†í•˜ê¸°",
                step3_title: "ê°€ìž¥ ìž¬ë¯¸ìžˆê²Œ ë³´ì‹ \nì›¹íˆ°ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                step3_placeholder: "ì›¹íˆ° ì œëª©ì„ ìž…ë ¥í•´ ì£¼ì„¸ìš”",
                start_analysis: "ë¶„ì„ ì‹œìž‘",
                computing: "ê²°ê³¼ ê³„ì‚° ì¤‘...",
                result_title: "AI ì¶”ì²œ ê²°ê³¼",
                result_desc: "ì‚¬ìš©ìžì˜ ê³ ìœ  ì·¨í–¥ì„ ë¶„ì„í•œ ê²°ê³¼ìž…ë‹ˆë‹¤.",
                exclude: "ì¶”ì²œì œì™¸",
                view_now: "ë°”ë¡œë³´ê¸°",
                new_analysis: "ìƒˆë¡œìš´ ë¶„ì„",
                exclude_msg: "ì•žìœ¼ë¡œ ì´ ì›¹íˆ°ì€ ì¶”ì²œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
                share_copy: "ë¶„ì„ ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!",
                share_fail: "ë³µì‚¬ ì‹¤íŒ¨",
                share_tpl_title: "[AIR.NW] AI ì¶”ì²œ ê²°ê³¼",
                share_tpl_link: "ë‚˜ë„ í•´ë³´ê¸°",
                share_modal_title: "ê³µìœ í•˜ê¸°",
                share_to_kakao: "ì¹´ì¹´ì˜¤í†¡",
                share_to_line: "ë¼ì¸",
                share_to_tiktok: "í‹±í†¡",
                share_to_text: "ê²°ê³¼ ë³µì‚¬",
                share_to_system: "ê¸°íƒ€ ê³µìœ ",
                conflict_msg: "ë‹¨ê³„ 1ì—ì„œ ì„ íƒí•œ ì„ í˜¸ íƒœê·¸ìž…ë‹ˆë‹¤.\në¹„ì„ í˜¸ë¡œ ë°”ê¾¸ì‹œê² ìŠµë‹ˆê¹Œ?",
                yes: "ì˜ˆ",
                no: "ì•„ë‹ˆì˜¤",
                main: "ë©”ì¸",
                ongoing: "ì—°ìž¬ì¤‘",
                finished: "ì™„ê²°",
                login: "ë¡œê·¸ì¸",
                logout: "ë¡œê·¸ì•„ì›ƒ",
                email: "ì´ë©”ì¼",
                password: "ë¹„ë°€ë²ˆí˜¸",
                login_btn: "ë¡œê·¸ì¸",
                signup_btn: "íšŒì›ê°€ìž…",
                social_login: "ì†Œì…œ ë¡œê·¸ì¸",
                auth_title: "ë¡œê·¸ì¸ / íšŒì›ê°€ìž…",
                like: "ì¢‹ì•„ìš”",
                my_info: "ë‚´ ì •ë³´",
                liked_list: "ì„ í˜¸ ìž‘í’ˆ (ì¢‹ì•„ìš”)",
                excluded_list: "ë¹„ì„ í˜¸ ìž‘í’ˆ (ì‹«ì–´ìš”)",
                delete_account: "íšŒì› íƒˆí‡´",
                find_pw: "ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°",
                reset_pw_msg: "ì´ë©”ì¼ë¡œ ë¹„ë°€ë²ˆí˜¸ ìž¬ì„¤ì • ë§í¬ê°€ ë°œê¸‰ë©ë‹ˆë‹¤.",
                delete_confirm: "ì •ë§ë¡œ íƒˆí‡´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì €ìž¥ëœ ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤.",
                no_data: "ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.",
                password_confirm: "ë¹„ë°€ë²ˆí˜¸ ìž¬í™•ì¸",
                pw_mismatch: "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
                pw_criteria: "ë¹„ë°€ë²ˆí˜¸ëŠ” 6ìž ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.",
                email_invalid: "ìœ íš¨í•œ ì´ë©”ì¼ì„ ìž…ë ¥í•´ì£¼ì„¸ìš”.",
                go_to_signup: "ì•„ì§ ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? íšŒì›ê°€ìž…",
                go_to_login: "ì´ë¯¸ ê³„ì •ì´ ìžˆìœ¼ì‹ ê°€ìš”? ë¡œê·¸ì¸",
                signup_confirm_msg: "ê°€ìž… í™•ì¸ ë©”ì¼ì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤! ë©”ì¼í•¨ì„ í™•ì¸í•´ì£¼ì„¸ìš”.",
                login_error_msg: "ë¡œê·¸ì¸ ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.",
                signup_success: "íšŒì›ê°€ìž…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!"
            },
            en: {
                subtitle: "My Pick Naver WebToon(with AI)",
                process: "Analysis Process",
                step: "Step",
                of: "of",
                share: "Share",
                step1_title: "Choose Preferred Tastes",
                step1_desc: "Please select at least one genre.",
                cat_status: "Status",
                cat_genre: "Main Genre",
                cat_topic: "Popular Topics",
                cat_feature: "Story Features",
                next: "Next Step",
                step2_title: "Choose Non-preferred Tastes (Optional)",
                step2_desc: "Webtoons with these tags will be strictly excluded.",
                back: "Back",
                continue: "Continue",
                step3_title: "What is your\nfavorite webtoon?",
                step3_placeholder: "Enter the webtoon title",
                start_analysis: "Start Analysis",
                computing: "Computing Result...",
                result_title: "AI Best Recommendations",
                result_desc: "Analyzed based on your unique preferences.",
                exclude: "Exclude",
                view_now: "View Now",
                new_analysis: "New Analysis",
                exclude_msg: "This webtoon will no longer be recommended.",
                share_copy: "Results copied to clipboard!",
                share_fail: "Copy failed.",
                share_tpl_title: "[AIR.NW] AI Recommended Results",
                share_tpl_link: "Try it yourself",
                share_modal_title: "Share Results",
                share_to_kakao: "KakaoTalk",
                share_to_line: "LINE",
                share_to_tiktok: "TikTok",
                share_to_text: "Copy Results",
                share_to_system: "Others",
                conflict_msg: "This is a preferred tag from Step 1.\nChange it to non-preferred?",
                yes: "Yes",
                no: "No",
                main: "Main",
                ongoing: "Ongoing",
                finished: "Finished",
                login: "Login",
                logout: "Logout",
                email: "Email",
                password: "Password",
                login_btn: "Login",
                signup_btn: "Sign Up",
                auth_title: "Login / Sign Up",
                like: "Like",
                my_info: "My Info",
                liked_list: "Preferred (Like)",
                excluded_list: "Disliked",
                delete_account: "Delete Account",
                find_pw: "Forgot Password?",
                reset_pw_msg: "A password reset link has been sent to your email.",
                delete_confirm: "Are you sure you want to delete your account?\nAll saved data will be permanently removed.",
                no_data: "No data found.",
                password_confirm: "Confirm Password",
                pw_mismatch: "Passwords do not match.",
                pw_criteria: "Password must be at least 6 characters.",
                email_invalid: "Please enter a valid email.",
                go_to_signup: "Don't have an account? Sign Up",
                go_to_login: "Already have an account? Login",
                signup_confirm_msg: "Confirmation email sent! Please check your inbox.",
                login_error_msg: "Invalid login credentials.",
                signup_success: "Sign-up completed successfully!"
            },
            zh: {
                subtitle: "My Pick Naver WebToon(with AI)",
                process: "åˆ†æžè¿›åº¦",
                step: "ç¬¬",
                of: "æ­¥ / å…±",
                share: "åˆ†äº«",
                step1_title: "è¯·é€‰æ‹©æ‚¨å–œå¥½çš„å£å‘³",
                step1_desc: "è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªç±»åˆ«ã€‚",
                cat_status: "è¿žè½½çŠ¶æ€",
                cat_genre: "ä¸»æ‰“ç±»åž‹",
                cat_topic: "çƒ­é—¨ç´ æ",
                cat_feature: "å‰§æƒ…ç‰¹ç‚¹",
                next: "ä¸‹ä¸€æ­¥",
                step2_title: "è¯·é€‰æ‹©ä¸å–œæ¬¢çš„å£å‘³ (å¯é€‰)",
                step2_desc: "åŒ…å«æ‰€é€‰æ ‡ç­¾çš„æ¼«ç”»å°†ä»ŽæŽ¨èä¸­æŽ’é™¤ã€‚",
                back: "è¿”å›ž",
                continue: "ç»§ç»­",
                step3_title: "æ‚¨æœ€å–œæ¬¢çš„\næ¼«ç”»æ˜¯ä»€ä¹ˆï¼Ÿ",
                step3_placeholder: "è¯·è¾“å…¥æ¼«ç”»æ ‡é¢˜",
                start_analysis: "å¼€å§‹åˆ†æž",
                computing: "æ­£åœ¨è®¡ç®—ç»“æžœ...",
                result_title: "AI æœ€ä½³æŽ¨è",
                result_desc: "æ ¹æ®æ‚¨çš„ç‹¬ç‰¹åå¥½åˆ†æžå¾—å‡ºã€‚",
                exclude: "ä¸å†æŽ¨è",
                view_now: "ç«‹å³é˜…è¯»",
                new_analysis: "é‡æ–°åˆ†æž",
                exclude_msg: "ä»ŠåŽå°†ä¸å†æŽ¨èæ­¤æ¼«ç”»ã€‚",
                share_copy: "ç»“æžœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼",
                share_fail: "å¤åˆ¶å¤±è´¥ã€‚",
                share_tpl_title: "[AIR.NW] AI æŽ¨èç»“æžœ",
                share_tpl_link: "æˆ‘ä¹Ÿè¦è¯•è¯•",
                share_modal_title: "åˆ†äº«ç»“æžœ",
                share_to_kakao: "KakaoTalk",
                share_to_line: "LINE",
                share_to_tiktok: "TikTok",
                share_to_text: "å¤åˆ¶ç»“æžœ",
                share_to_system: "å…¶ä»–",
                conflict_msg: "è¿™æ˜¯æ‚¨åœ¨ç¬¬1æ­¥é€‰æ‹©çš„å–œå¥½æ ‡ç­¾ã€‚\nè¦æ”¹ä¸ºä¸å–œæ¬¢çš„å—ï¼Ÿ",
                yes: "æ˜¯",
                no: "å¦",
                main: "ä¸»é¡µ",
                ongoing: "è¿žè½½ì¤‘",
                finished: "å·²å®Œç»“",
                login: "ç™»å½•",
                logout: "ç™»å‡º",
                email: "ç”µå­é‚®ä»¶",
                password: "å¯†ç ",
                login_btn: "ç™»å½•",
                signup_btn: "æ³¨å†Œ",
                auth_title: "ç™»å½• / æ³¨å†Œ",
                like: "å–œæ¬¢",
                my_info: "æˆ‘çš„ä¿¡æ¯",
                liked_list: "æˆ‘å–œæ¬¢çš„æ¼«ç”»",
                excluded_list: "æŽ’é™¤çš„æ¼«ç”»",
                delete_account: "æ³¨é”€è´¦å·",
                find_pw: "æ‰¾å›žå¯†ç ",
                reset_pw_msg: "é‡ç½®å¯†ç é“¾æŽ¥å·²å‘é€è‡³æ‚¨çš„é‚®ç®±ã€‚",
                delete_confirm: "ç¡®å®šè¦æ³¨é”€è´¦å·å—ï¼Ÿ\næ‰€æœ‰ä¿å­˜çš„æ•°æ®å°†è¢«æ°¸ä¹…åˆ é™¤ã€‚",
                no_data: "æš‚æ— æ•°æ®ã€‚",
                password_confirm: "ç¡®è®¤å¯†ç ",
                pw_mismatch: "å¯†ç ä¸ä¸€è‡´ã€‚",
                pw_criteria: "å¯†ç é•¿åº¦è‡³å°‘ä¸º 6 ä½ã€‚",
                email_invalid: "è¯·è¾“å…¥æœ‰æ•ˆçš„ç”µå­é‚®ä»¶åœ°å€ã€‚",
                go_to_signup: "è¿˜æ²¡æœ‰è´¦å·ï¼Ÿæ³¨å†Œ",
                go_to_login: "å·²æœ‰è´¦å·ï¼Ÿç™»å½•",
                signup_confirm_msg: "ç¡®è®¤é‚®ä»¶å·²å‘é€ï¼è¯·æ£€æŸ¥æ‚¨çš„æ”¶ä»¶ç®±ã€‚",
                login_error_msg: "ç™»å½•ä¿¡æ¯æ— æ•ˆã€‚",
                signup_success: "æ³¨å†ŒæˆåŠŸï¼"
            },
            ja: {
                subtitle: "My Pick Naver WebToon(with AI)",
                process: "åˆ†æžãƒ—ãƒ­ã‚»ã‚¹",
                step: "ã‚¹ãƒ†ãƒƒãƒ—",
                of: "/",
                share: "å…±æœ‰ã™ã‚‹",
                step1_title: "ãŠå¥½ã¿ã®ã‚¿ã‚¤ãƒ—ã‚’é¸ã‚“ã§ãã ã•ã„",
                step1_desc: "1ã¤ä»¥ä¸Šã®é¸æŠžãŒå¿…é ˆã§ã™ã€‚",
                cat_status: "é€£è¼‰çŠ¶æ…‹",
                cat_genre: "ãƒ¡ã‚¤ãƒ³ã‚¸ãƒ£ãƒ³ãƒ«",
                cat_topic: "äººæ°—ã®ç´ æ",
                cat_feature: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®ç‰¹å¾´",
                next: "æ¬¡ã¸",
                step2_title: "è‹¦æ‰‹ãªå¥½ã¿ã‚’é¸ã‚“ã§ãã ã•ã„ (ä»»æ„)",
                step2_desc: "é¸æŠžã—ãŸã‚¿ã‚°ãŒå«ã¾ã‚Œã‚‹ä½œå“ã¯ãŠã™ã™ã‚ã‹ã‚‰é™¤å¤–ã•ã‚Œã¾ã™ã€‚",
                back: "æˆ»ã‚‹",
                continue: "ç¶šã‘ã‚‹",
                step3_title: "ä¸€ç•ªé¢ç™½ã‹ã£ãŸ\nã‚¦ã‚§ãƒ–ãƒˆã‚¥ãƒ¼ãƒ³ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                step3_placeholder: "ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
                start_analysis: "åˆ†æžé–‹å§‹",
                computing: "çµæžœã‚’è¨ˆç®—ä¸­...",
                result_title: "AI ãŠã™ã™ã‚çµæžœ",
                result_desc: "ã‚ãªãŸã®å¥½ã¿ã‚’åˆ†æžã—ãŸçµæžœã§ã™ã€‚",
                exclude: "ãŠã™ã™ã‚é™¤å¤–",
                view_now: "ä»Šã™ãè¦‹ã‚‹",
                new_analysis: "æ–°ã—ã„åˆ†æž",
                exclude_msg: "ä»Šå¾Œã€ã“ã®ä½œå“ã¯ãŠã™ã™ã‚ã•ã‚Œã¾ã›ã‚“ã€‚",
                share_copy: "çµæžœãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã—ãŸï¼",
                share_fail: "ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚",
                share_tpl_title: "[AIR.NW] AI ãŠã™ã™ã‚çµæžœ",
                share_tpl_link: "ã‚„ã£ã¦ã¿ã‚‹",
                share_modal_title: "çµæžœã‚’å…±æœ‰",
                share_to_kakao: "KakaoTalk",
                share_to_line: "LINE",
                share_to_tiktok: "TikTok",
                share_to_text: "çµæžœã‚³ãƒ”ãƒ¼",
                share_to_system: "ãã®ä»–",
                conflict_msg: "ã‚¹ãƒ†ãƒƒãƒ—1ã§é¸æŠžã—ãŸå¥½ã¿ã‚¿ã‚°ã§ã™ã€‚\nè‹¦æ‰‹ãªã‚¿ã‚¤ãƒ—ã«å¤‰æ›´ã—ã¾ã™ã‹ï¼Ÿ",
                yes: "ã¯ã„",
                no: "ã„ã„ãˆ",
                main: "ãƒ¡ã‚¤ãƒ³",
                ongoing: "é€£è¼‰ä¸­",
                finished: "å®Œçµ",
                login: "ãƒ­ã‚°ã‚¤ãƒ³",
                logout: "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",
                email: "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
                password: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",
                login_btn: "ãƒ­ã‚°ã‚¤ãƒ³",
                signup_btn: "æ–°è¦ç™»éŒ²",
                auth_title: "ãƒ­ã‚°ã‚¤ãƒ³ / æ–°è¦ç™»éŒ²",
                like: "ãŠæ°—ã«å…¥ã‚Š",
                my_info: "ãƒžã‚¤æƒ…å ±",
                liked_list: "ãŠæ°—ã«å…¥ã‚Šä½œå“",
                excluded_list: "é™¤å¤–ã—ãŸä½œå“",
                delete_account: "ä¼šå“¡è„±é€€",
                find_pw: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¿˜ã‚ŒãŸå ´åˆ",
                reset_pw_msg: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†è¨­å®šãƒªãƒ³ã‚¯ã‚’ãƒ¡ãƒ¼ãƒ«ã§é€ä¿¡ã—ã¾ã—ãŸã€‚",
                delete_confirm: "æœ¬å½“ã«é€€ä¼šã—ã¾ã™ã‹ï¼Ÿ\nä¿å­˜ã•ã‚ŒãŸã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ãŒå‰Šé™¤ã•ã‚Œã¾ã™ã€‚",
                no_data: "ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚",
                password_confirm: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†ç¢ºèª",
                pw_mismatch: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸€è‡´ã—ã¾ã›ã‚“ã€‚",
                pw_criteria: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯6æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚",
                email_invalid: "æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",
                go_to_signup: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„ã§ã™ã‹ï¼Ÿ æ–°è¦ç™»éŒ²",
                go_to_login: "ã™ã§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ã™ã‹ï¼Ÿ ãƒ­ã‚°ã‚¤ãƒ³",
                signup_confirm_msg: "ç¢ºèªãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã—ãŸï¼ãƒ¡ãƒ¼ãƒ«ãƒœãƒƒã‚¯ã‚¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",
                login_error_msg: "ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚",
                signup_success: "ä¼šå“¡ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸï¼"
            }
        };

        const getGenreCategories = (t) => [
            { name: t.cat_status, genres: ["ì—°ìž¬ì¤‘", "ì™„ê²°"], en: ["Ongoing", "Finished"], zh: ["è¿žè½½ä¸­", "å·²å®Œç»“"], ja: ["é€£è¼‰ä¸­", "å®Œçµ"] },
            {
                name: t.cat_genre,
                genres: ["ë¡œë§¨ìŠ¤", "íŒíƒ€ì§€", "ì•¡ì…˜", "ë“œë¼ë§ˆ", "ìŠ¤ë¦´ëŸ¬", "ë¬´í˜‘/ì‚¬ê·¹", "ê°œê·¸", "ì¼ìƒ", "ê°ì„±", "ìŠ¤í¬ì¸ "],
                en: ["Romance", "Fantasy", "Action", "Drama", "Thriller", "Martial Arts", "Comedy", "Life", "Sensibility", "Sports"],
                zh: ["æµªæ¼«", "å¥‡å¹»", "åŠ¨ä½œ", "å‰§æƒ…", "æƒŠæ‚š", "æ­¦ä¾ /å²å‰§", "æžç¬‘", "æ—¥å¸¸", "æ„Ÿæ€§", "ä½“è‚²"],
                ja: ["ãƒ­ãƒžãƒ³ã‚¹", "ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼", "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³", "ãƒ‰ãƒ©ãƒž", "ã‚¹ãƒªãƒ©ãƒ¼", "æ­¦ä¾ /æ™‚ä»£åŠ‡", "ã‚®ãƒ£ã‚°", "æ—¥å¸¸", "æ„Ÿì„±", "ìŠ¤í¬ì¸ "]
            },
            {
                name: t.cat_topic,
                genres: ["íšŒê·€", "ë¹™ì˜", "ë¨¼ì¹˜í‚¨", "ì•„ì´ëŒ", "ê²Œìž„íŒíƒ€ì§€", "ë³µìˆ˜", "í•™ì›ë¬¼", "ì˜¤í”¼ìŠ¤", "ë¡œíŒ", "ì´ì„¸ê³„"],
                en: ["Regression", "Possession", "Munchkin", "Idol", "Game Fantasy", "Revenge", "School", "Office", "Rom-Fantasy", "Isekai"],
                zh: ["å›žå½’", "é™„èº«", "é¾™å‚²å¤©", "å¶åƒ", "æ¸¸æˆå¥‡å¹»", "å¤ä»‡", "æ ¡å›­", "èŒåœº", "ç½—æ›¼å¥‡å¹»", "å¼‚ä¸–ç•Œ"],
                ja: ["å›žå¸°", "æ†‘ä¾", "æœ€å¼·", "ã‚¢ã‚¤ãƒ‰ãƒ«", "ê²Œìž„íŒíƒ€ì§€", "å¾©è®", "å­¦åœ’ã‚‚ã®", "ã‚ªãƒ•ã‚£ã‚¹", "ë¡œíŒ", "ç•°ä¸–ç•Œ"]
            },
            {
                name: t.cat_feature,
                genres: ["ì‚¬ì´ë‹¤", "ížë§", "ì„±ìž¥ë¬¼", "ë‘ë‡Œì‹¸ì›€", "ì„œìŠ¤íŽœìŠ¤"],
                en: ["Satisfying", "Healing", "Growth", "Brain Battle", "Suspense"],
                zh: ["çˆ½æ–‡", "æ²»æ„ˆ", "æˆé•¿", "è„‘åŠ›æˆ˜", "æ‚¬ç–‘"],
                ja: ["ã‚¹ã‚«ãƒƒã¨", "ãƒ’ãƒ¼ãƒªãƒ³ã‚°", "æˆé•·ã‚‚ã®", "é ­è„³æˆ¦", "ã‚µã‚¹ãƒšãƒ³ã‚¹"]
            }
        ];

        const MOCK_WEBTOONS = [
            { id: "641253", title: "ì™¸ëª¨ì§€ìƒì£¼ì˜", tags: ["ì—í”¼ì†Œë“œ", "ì•¡ì…˜", "ë°•íƒœì¤€", "ê¸ˆìš”ì›¹íˆ°"], thumbnail: "https://image-comic.pstatic.net/webtoon/641253/thumbnail/thumbnail_IMAG21_d894f11f-668a-4046-8692-730a961f7743.jpg", match: 98, status: 'ONGOING' },
            { id: "183559", title: "ì‹ ì˜ íƒ‘", tags: ["íŒíƒ€ì§€", "ë¨¼ì¹˜í‚¨", "ìž¥ëŒ€í•œì„œì‚¬"], thumbnail: "https://image-comic.pstatic.net/webtoon/183559/thumbnail/thumbnail_IMAG21_56133031-69f8-45a7-96a9-858348b4e720.jpg", match: 96, status: 'ONGOING' }
        ];

        const ProgressBar = ({ step, t }) => (
            <div className="mb-10 max-w-2xl mx-auto px-6">
                <div className="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                    <div className="h-full bg-primary transition-all duration-700 ease-out" style={{ width: `${(step / 4) * 100}%` }}></div>
                </div>
                <div className="mt-4 flex justify-between text-[11px] font-bold text-gray-400 uppercase tracking-widest">
                    <span>{t.process}</span>
                    <span className="text-primary">{t.step} {step} {t.of} 4</span>
                </div>
            </div>
        );

        const WebtoonCard = ({ item, rank, onDislike, onLike, isLiked, isDisliked, t }) => {
            const getRankDisplay = (r) => {
                if (r === 1) return <span className="text-lg mr-1.5 shadow-sm">ðŸ¥‡</span>;
                if (r === 2) return <span className="text-lg mr-1.5 shadow-sm">ðŸ¥ˆ</span>;
                if (r === 3) return <span className="text-lg mr-1.5 shadow-sm">ðŸ¥‰</span>;
                return <span className="text-base font-black text-gray-300 mr-2 italic">{r}</span>;
            };
            return (
                <div className="bg-white rounded-[32px] overflow-hidden shadow-soft hover:shadow-xl transition-all duration-500 transform hover:-translate-y-2 flex flex-col relative group border border-gray-50 h-full">

                    <div className="relative aspect-[3/4] overflow-hidden bg-gray-100">
                        <img src={item.thumbnail} referrerPolicy="no-referrer" className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" onError={(e) => { e.target.src = "https://via.placeholder.com/400?text=No Image"; }} />
                        <div className="absolute bottom-1 right-1 z-20 bg-primary/95 text-white text-[10px] font-bold px-2 py-0.5 rounded-lg shadow-md backdrop-blur-sm">{Math.floor(item.match)}%</div>
                    </div>
                    <div className="p-5 flex flex-col flex-grow">
                        <div className="flex flex-wrap gap-1.5 mb-3 h-[5.2rem] content-start overflow-hidden">
                            {(() => {
                                const rawTags = (item.tags || []);
                                const filteredTags = [];
                                for (const tag of rawTags) {
                                    const isRedundant = filteredTags.some(existing =>
                                        tag.includes(existing) || existing.includes(tag)
                                    );
                                    if (!isRedundant) { filteredTags.push(tag); }
                                }
                                return filteredTags.slice(0, 6).map((tag, idx) => (
                                    <span key={idx} className="text-[11px] font-bold text-primary bg-orange-50 px-2 py-0.5 rounded-md tracking-tighter">#{tag}</span>
                                ));
                            })()}
                        </div>
                        <div className="flex items-center mb-4 h-[2.6rem]">
                            <div className="flex-shrink-0 flex items-center">{getRankDisplay(rank)}</div>
                            <h3 className="text-sm font-extrabold text-gray-900 leading-tight line-clamp-2 break-keep tracking-tighter">{item.title}</h3>
                        </div>
                        <div className="mt-auto w-full">
                            <div className="flex items-center justify-between mb-4">
                                {item.starScore && <div className="text-[10px] font-bold text-yellow-500">â˜… {item.starScore.toFixed(2)}</div>}
                                <div className="flex gap-2">
                                    <button
                                        onClick={() => onLike(item.id)}
                                        className={`w-8 h-8 rounded-full flex items-center justify-center transition-all ${isLiked ? 'bg-primary text-white shadow-md' : 'bg-gray-50 text-gray-300 hover:text-primary'}`}
                                    >
                                        <svg viewBox="0 0 24 24" className="w-4 h-4 fill-current"><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"></path></svg>
                                    </button>
                                    <button
                                        onClick={() => onDislike(item.id)}
                                        className={`w-8 h-8 rounded-full flex items-center justify-center transition-all ${isDisliked ? 'bg-red-500 text-white shadow-md' : 'bg-gray-50 text-gray-300 hover:text-red-500'}`}
                                    >
                                        <svg viewBox="0 0 24 24" className="w-4 h-4 fill-current"><path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"></path></svg>
                                    </button>
                                </div>
                            </div>
                            <a href={`https://comic.naver.com/webtoon/list?titleId=${item.id}`} target="_blank" className="block w-full py-3 bg-primary text-white text-center rounded-xl font-bold hover:opacity-90 transition-all text-[16px] flex items-center justify-center gap-1 shadow-sm">
                                <span>{t.view_now}</span>
                                <span className="text-[10px] opacity-80 font-medium translate-y-[1px]">({item.status === 'FINISHED' ? t.finished : t.ongoing})</span>
                            </a>
                        </div>
                    </div>
                </div>
            );
        };

        const ShareModal = ({ isOpen, onClose, t, results }) => {
            useEffect(() => {
                if (isOpen) {
                    document.body.classList.add('modal-open');
                    initKakao();
                } else { document.body.classList.remove('modal-open'); }
                return () => document.body.classList.remove('modal-open');
            }, [isOpen]);

            if (!isOpen) return null;

            const shareUrl = window.location.href;
            const fullRankText = results.map((w, i) => `${i + 1}. ${w.title} (${w.status === 'FINISHED' ? t.finished : t.ongoing})`).join('\n');
            const shareText = `${t.share_tpl_title}\n\n${fullRankText}\n\nðŸ”— ${t.share_tpl_link}: ${shareUrl}`;

            const copyToClip = () => {
                const el = document.createElement('textarea');
                el.value = shareText;
                document.body.appendChild(el);
                el.select();
                try { document.execCommand('copy'); alert(t.share_copy); } catch (e) { alert(t.share_fail); }
                document.body.removeChild(el);
                onClose();
            };

            const shareToKakao = () => {
                if (window.Kakao && Kakao.isInitialized()) {
                    try {
                        Kakao.Share.sendDefault({
                            objectType: 'feed',
                            content: {
                                title: t.share_tpl_title,
                                description: results.slice(0, 3).map(w => w.title).join(', ') + ' ë“± ì¶”ì²œë¨',
                                imageUrl: results[0]?.thumbnail || 'https://comic.naver.com/static/img/common/naver_shared.png',
                                link: { mobileWebUrl: shareUrl, webUrl: shareUrl },
                            },
                            buttons: [{ title: t.share_tpl_link, link: { mobileWebUrl: shareUrl, webUrl: shareUrl } }],
                        });
                        return;
                    } catch (e) { console.error(e); }
                }
                if (navigator.share) { navigator.share({ title: t.share_tpl_title, text: shareText, url: shareUrl }).catch(() => { }); }
                else copyToClip();
            };

            const shareToLine = () => { window.open(`https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(shareUrl)}&text=${encodeURIComponent(shareText)}`, '_blank'); };

            return (
                <div className="fixed inset-0 z-[99999] flex items-center justify-center p-6 bg-black/50 backdrop-blur-md" onClick={onClose}>
                    <div className="bg-white w-full max-w-sm rounded-[56px] shadow-2xl overflow-hidden animate-up" onClick={e => e.stopPropagation()}>
                        <div className="pt-12 pb-10 px-8">
                            <h3 className="text-2xl font-black text-center mb-10 tracking-tight">{t.share_modal_title}</h3>
                            <div className="grid grid-cols-2 gap-4 mb-8">
                                <button onClick={shareToKakao} className="premium-gray-btn flex flex-col items-center gap-4 p-8 rounded-[36px]">
                                    <div className="w-16 h-16 flex items-center justify-center bg-[#FEE500] rounded-[24px] shadow-sm overflow-hidden"><img src="https://upload.wikimedia.org/wikipedia/commons/e/e3/KakaoTalk_logo.svg" className="w-10 h-10 object-contain" alt="Kakao" /></div>
                                    <span className="text-sm font-black text-gray-700">{t.share_to_kakao}</span>
                                </button>
                                <button onClick={shareToLine} className="premium-gray-btn flex flex-col items-center gap-4 p-8 rounded-[36px]">
                                    <div className="w-16 h-16 flex items-center justify-center bg-[#06C755] rounded-[22px] shadow-sm overflow-hidden"><img src="https://upload.wikimedia.org/wikipedia/commons/4/41/LINE_logo.svg" className="w-10 h-10 object-contain" alt="LINE" /></div>
                                    <span className="text-sm font-black text-gray-700">{t.share_to_line}</span>
                                </button>
                                <button onClick={copyToClip} className="premium-gray-btn flex flex-col items-center gap-4 p-8 rounded-[36px]">
                                    <div className="w-16 h-16 flex items-center justify-center bg-black rounded-[22px] shadow-sm overflow-hidden"><img src="https://www.logo.wine/a/logo/TikTok/TikTok-Icon-Logo.wine.svg" className="w-[85%] h-[85%] object-contain" alt="TikTok" style={{ filter: 'brightness(1.5)' }} /></div>
                                    <span className="text-sm font-black text-gray-700">{t.share_to_tiktok}</span>
                                </button>
                                <button onClick={copyToClip} className="premium-gray-btn flex flex-col items-center gap-4 p-8 rounded-[36px]">
                                    <div className="w-16 h-16 flex items-center justify-center bg-slate-200 rounded-[22px] shadow-sm overflow-hidden text-slate-600"><svg viewBox="0 0 24 24" className="w-8 h-8 fill-current"><path d="M7 6V3C7 2.44772 7.44772 2 8 2H20C20.5523 2 21 2.44772 21 3V17C21 17.5523 20.5523 18 20 18H17V21C17 21.5523 16.5523 22 16 22H4C3.44772 22 3 21.5523 3 21V7C3 6.44772 3.44772 6 4 6H7ZM9 6H16V16H17V4H9V6ZM5 8V20H15V8H5Z"></path></svg></div>
                                    <span className="text-sm font-black text-gray-700">{t.share_to_text}</span>
                                </button>
                            </div>
                            <button onClick={onClose} className="w-full py-5 bg-gray-50 rounded-2xl text-gray-400 font-black">CLOSE</button>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [lang, setLang] = useState('ko');
            const [step, setStep] = useState(1);
            const [selectedG, setSelectedG] = useState([]);
            const [excludedG, setExcludedG] = useState([]); // Non-preferred tastes
            const [favTitle, setFavTitle] = useState("");
            const [loading, setLoading] = useState(false);
            const [results, setResults] = useState([]);
            const [scoredPool, setScoredPool] = useState([]);
            const [excludedIds, setExcludedIds] = useState(() => {
                try { return JSON.parse(localStorage.getItem('excludedWebtoons')) || []; } catch (e) { return []; }
            });
            const [showExcludePopup, setShowExcludePopup] = useState(false);
            const [showShareModal, setShowShareModal] = useState(false);
            const [showAuthModal, setShowAuthModal] = useState(false);
            const [showProfileModal, setShowProfileModal] = useState(false);
            const [user, setUser] = useState(null);
            const [likedIds, setLikedIds] = useState([]);
            const [conflictTag, setConflictTag] = useState(null); // Tag causing conflict
            const [profileTab, setProfileTab] = useState('liked'); // 'liked' or 'excluded'
            const [authMode, setAuthMode] = useState('login'); // 'login' or 'signup'
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [confirmPassword, setConfirmPassword] = useState('');

            const t = TRANSLATIONS[lang] || TRANSLATIONS.ko;

            useEffect(() => {
                supabase.auth.getSession().then(({ data: { session } }) => {
                    if (session) { setUser(session.user); loadUserData(session.user.id); }
                });
                const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {
                    if (session) { setUser(session.user); loadUserData(session.user.id); }
                    else { setUser(null); setLikedIds([]); setExcludedIds([]); }
                });

                // Handle Signup Success Redirect
                if (window.location.hash.includes('type=signup')) {
                    alert(t.signup_success);
                    // Clear hash to avoid repeated alerts
                    window.history.replaceState(null, null, window.location.pathname);
                }

                return () => subscription.unsubscribe();
            }, [t]);

            const loadUserData = async (userId) => {
                const { data: exData } = await supabase.from('excluded_webtoons').select('webtoon_id').eq('user_id', userId);
                if (exData) setExcludedIds(exData.map(d => d.webtoon_id));
                const { data: favData } = await supabase.from('favorite_webtoons').select('webtoon_id').eq('user_id', userId);
                if (favData) setLikedIds(favData.map(d => d.webtoon_id));
            };

            const toggleLike = async (id) => {
                if (!user) { setShowAuthModal(true); return; }
                const isLiked = likedIds.includes(id);
                if (isLiked) {
                    await supabase.from('favorite_webtoons').delete().eq('user_id', user.id).eq('webtoon_id', id);
                    setLikedIds(prev => prev.filter(it => it !== id));
                } else {
                    // Remove from dislikes if it was disliked
                    if (excludedIds.includes(id)) toggleDislike(id);
                    await supabase.from('favorite_webtoons').insert({ user_id: user.id, webtoon_id: id });
                    setLikedIds(prev => [...prev, id]);
                }
            };

            const handleExclude = async (id) => {
                const newEx = [...excludedIds, id];
                setExcludedIds(newEx);
                localStorage.setItem('excludedWebtoons', JSON.stringify(newEx));
                if (user) { await supabase.from('excluded_webtoons').upsert({ user_id: user.id, webtoon_id: id }); }
                setResults(scoredPool.filter(x => !newEx.includes(x.id)).slice(0, 10));
                setShowExcludePopup(true);
                setTimeout(() => setShowExcludePopup(false), 2000);
            };
            const categories = useMemo(() => getGenreCategories(t), [t]);

            const nextStep = () => { setStep(prev => prev + 1); window.scrollTo({ top: 0, behavior: 'smooth' }); };
            const prevStep = () => { setStep(prev => prev - 1); window.scrollTo({ top: 0, behavior: 'smooth' }); };
            const reset = () => { setStep(1); setSelectedG([]); setExcludedG([]); setFavTitle(""); setScoredPool([]); window.scrollTo({ top: 0, behavior: 'smooth' }); };

            const handleAnalyze = async () => {
                setLoading(true); setStep(4);
                window.scrollTo({ top: 0, behavior: 'smooth' });
                await new Promise(r => setTimeout(r, 1500));
                const rawData = window.WEBTOON_DATA || MOCK_WEBTOONS;
                const statusFilters = selectedG.filter(s => ["ì—°ìž¬ì¤‘", "ì™„ê²°"].includes(s));
                const genrePreferences = selectedG.filter(s => !["ì—°ìž¬ì¤‘", "ì™„ê²°"].includes(s));

                // Similarity scoring based on liked webtoons
                const likedWebtoons = rawData.filter(w => likedIds.includes(w.titleId || w.id));
                const preferredLegacyTags = likedWebtoons.reduce((acc, curr) => [...acc, ...(curr.tags || [])], []);

                const scoredData = rawData.map(item => {
                    const webtoon = {
                        id: item.titleId || item.id,
                        title: item.titleName || item.title,
                        thumbnail: item.thumbnailUrl || item.thumbnail,
                        tags: (item.tags && item.tags.length > 0) ? item.tags : [item.day, item.status === 'FINISHED' ? t.finished : t.ongoing, item.author].filter(Boolean),
                        author: item.author,
                        status: item.status,
                        starScore: item.starScore || 0,
                        viewCount: item.viewCount || 0
                    };

                    if (excludedIds.includes(webtoon.id)) return { ...webtoon, match: 0 };
                    if (excludedG.length > 0) {
                        const hasExcludedTag = excludedG.some(ex =>
                            webtoon.tags.some(t => String(t).includes(ex)) || webtoon.title.includes(ex)
                        );
                        if (hasExcludedTag) return { ...webtoon, match: 0 };
                    }

                    let score = 50;
                    if (statusFilters.length > 0) {
                        const myStatus = webtoon.status === 'FINISHED' ? 'ì™„ê²°' : 'ì—°ìž¬ì¤‘';
                        if (!statusFilters.includes(myStatus)) return { ...webtoon, match: 0 };
                    }
                    genrePreferences.forEach(pref => {
                        const keywords = pref.includes('/') ? pref.split('/') : [pref];
                        if (keywords.some(k => webtoon.tags.some(t => String(t).includes(k)) || webtoon.title.includes(k))) score += 20;
                    });

                    // Bonus for similarity to liked webtoons
                    if (preferredLegacyTags.length > 0) {
                        const overlap = webtoon.tags.filter(tag => preferredLegacyTags.includes(tag)).length;
                        score += (overlap * 5);
                    }

                    return { ...webtoon, match: Math.min(99, score + (Math.random() * 5)) };
                });

                const sorted = scoredData.filter(w => w.match > 0).sort((a, b) => {
                    let scoreA = a.match;
                    let scoreB = b.match;
                    if (dislikedIds.includes(a.id)) scoreA -= 50;
                    if (dislikedIds.includes(b.id)) scoreB -= 50;
                    if (scoreB !== scoreA) return scoreB - scoreA;
                    if (b.starScore !== a.starScore) return b.starScore - a.starScore;
                    return b.viewCount - a.viewCount;
                });
                setScoredPool(sorted);
                setResults(sorted.slice(0, 10));
                setLoading(false);
            };

            const toggleDislike = async (id) => {
                if (!user) { setShowAuthModal(true); return; }
                const isDisliked = dislikedIds.includes(id);
                if (isDisliked) {
                    await supabase.from('excluded_webtoons').delete().eq('user_id', user.id).eq('webtoon_id', id);
                    setExcludedIds(prev => prev.filter(it => it !== id));
                } else {
                    // Remove from likes if it was liked
                    if (likedIds.includes(id)) toggleLike(id);
                    await supabase.from('excluded_webtoons').insert({ user_id: user.id, webtoon_id: id });
                    setExcludedIds(prev => [...prev, id]);
                }
            };

            return (
                <div className="min-h-screen pb-20">
                    <header className="sticky top-0 z-[1000] bg-white/90 backdrop-blur-md border-b border-gray-100 py-4 px-4 sm:px-10">
                        <div className="max-w-7xl mx-auto flex flex-col md:flex-row items-center gap-4 md:gap-0 justify-between">
                            <div className="flex items-center gap-2 cursor-pointer order-1 md:w-1/4" onClick={reset}>
                                <span className="text-2xl">ðŸ“–</span>
                                <h1 className="text-xl font-black text-gray-900 tracking-tighter">AIR<span className="text-primary italic">.NW</span></h1>
                            </div>
                            <div className="flex flex-col items-center order-2 md:w-2/4 w-full">
                                <h1 className="text-sm sm:text-xl font-black text-gray-800 tracking-tighter italic leading-none mb-3 sm:mb-4 text-center">{t.subtitle}</h1>
                                <div className="flex justify-center gap-1 w-full max-w-[340px] sm:max-w-none px-2">
                                    {[{ code: 'ko', label: 'í•œêµ­ì–´' }, { code: 'en', label: 'English' }, { code: 'zh', label: 'ä¸­æ–‡' }, { code: 'ja', label: 'æ—¥æœ¬èªž' }].map(l => (
                                        <button key={l.code} onClick={() => setLang(l.code)}
                                            className={`flex-1 sm:flex-none text-[8px] min-[360px]:text-[9px] sm:text-[11px] font-black py-2 sm:py-2.5 rounded-xl border transition-all whitespace-nowrap min-w-0 sm:px-5 ${lang === l.code ? 'bg-primary border-primary text-white shadow-md' : 'bg-white text-gray-400 border-gray-100 hover:border-gray-200'}`}>
                                            {l.label}
                                        </button>
                                    ))}
                                </div>
                            </div>
                            <div className="order-3 md:w-1/4 flex justify-end gap-2 sm:gap-4 items-center">
                                {user ? (
                                    <div className="flex items-center gap-2 sm:gap-4">
                                        <button onClick={() => setShowProfileModal(true)} title={t.my_info} className="w-10 h-10 flex items-center justify-center bg-gray-50 text-gray-500 rounded-2xl hover:bg-primary/10 hover:text-primary transition-all">
                                            <svg viewBox="0 0 24 24" className="w-5 h-5 fill-current"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg>
                                        </button>
                                        <button onClick={() => supabase.auth.signOut()} title={t.logout} className="w-10 h-10 flex items-center justify-center text-gray-400 hover:text-red-500 transition-all">
                                            <svg viewBox="0 0 24 24" className="w-5 h-5 fill-current"><path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"></path></svg>
                                        </button>
                                    </div>
                                ) : (
                                    <button onClick={() => setShowAuthModal(true)} title={t.login} className="w-10 h-10 flex items-center justify-center bg-gray-50 text-gray-400 rounded-2xl hover:bg-primary/10 hover:text-primary transition-all">
                                        <svg viewBox="0 0 24 24" className="w-5 h-5 fill-current"><path d="M11 7L9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z"></path></svg>
                                    </button>
                                )}
                                {step < 4 ? (
                                    <button onClick={reset} title={t.main} className={`w-10 h-10 flex items-center justify-center rounded-2xl border border-gray-100 hover:bg-gray-50 transition-all ${step > 1 ? 'visible' : 'invisible'}`}>
                                        <svg viewBox="0 0 24 24" className="w-5 h-5 fill-gray-400"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg>
                                    </button>
                                ) : (
                                    !loading && (
                                        <button onClick={() => setShowShareModal(true)} title={t.share} className="w-10 h-10 flex items-center justify-center bg-primary text-white rounded-2xl shadow-lg hover:scale-110 transition-transform active:scale-95 animate-blink">
                                            <svg viewBox="0 0 24 24" className="w-5 h-5 fill-current"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92z"></path></svg>
                                        </button>
                                    )
                                )}
                            </div>
                        </div>
                    </header>
                    <main className="max-w-6xl mx-auto px-6 py-10">
                        <ProgressBar step={step} t={t} />
                        {step === 1 && (
                            <div className="animate-up max-w-4xl mx-auto">
                                <div className="text-center mb-14"><h2 className="text-3xl sm:text-4xl font-black mb-4 tracking-tight">{t.step1_title}</h2><p className="text-gray-600 italic font-bold">{t.step1_desc}</p></div>
                                <div className="space-y-10">{categories.map(cat => (<div key={cat.name} className="space-y-5"><h3 className="text-sm font-black text-gray-600 uppercase tracking-widest px-1">{cat.name}</h3><div className="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 gap-3">{cat.genres.map((g, idx) => { const label = lang === 'en' ? cat.en[idx] : lang === 'zh' ? cat.zh[idx] : lang === 'ja' ? cat.ja[idx] : g; return (<button key={g} onClick={() => setSelectedG(prev => prev.includes(g) ? prev.filter(it => it !== g) : [...prev, g])} className={`py-4 px-4 rounded-[24px] text-[13px] font-bold border-2 transition-all ${selectedG.includes(g) ? 'bg-primary border-primary text-white shadow-xl scale-[0.98]' : 'bg-white border-gray-100 text-gray-500'}`}>#{label}</button>); })}</div></div>))}</div>
                                <div className="mt-20 text-center"><button disabled={selectedG.length === 0} onClick={nextStep} className="w-full sm:w-auto px-16 py-5 bg-primary text-white font-black rounded-full shadow-2xl disabled:opacity-20 text-lg uppercase tracking-widest">NEXT</button></div>
                            </div>
                        )}
                        {step === 2 && (
                            <div className="animate-up max-w-4xl mx-auto">
                                <div className="text-center mb-14"><h2 className="text-3xl sm:text-4xl font-black mb-4 tracking-tight">{t.step2_title}</h2><p className="text-gray-600 italic font-bold">{t.step2_desc}</p></div>
                                <div className="space-y-10">
                                    {categories.map(cat => (
                                        <div key={cat.name} className="space-y-5">
                                            <h3 className="text-sm font-black text-gray-600 uppercase tracking-widest px-1">{cat.name}</h3>
                                            <div className="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 gap-3">
                                                {cat.genres.map((g, idx) => {
                                                    const label = lang === 'en' ? cat.en[idx] : lang === 'zh' ? cat.zh[idx] : lang === 'ja' ? cat.ja[idx] : g;
                                                    const isPreferred = selectedG.includes(g);
                                                    return (
                                                        <button
                                                            key={g}
                                                            onClick={() => {
                                                                if (isPreferred) {
                                                                    setConflictTag(g);
                                                                } else {
                                                                    setExcludedG(prev => prev.includes(g) ? prev.filter(it => it !== g) : [...prev, g]);
                                                                }
                                                            }}
                                                            className={`py-4 px-4 rounded-[24px] text-[13px] font-bold border-2 transition-all ${excludedG.includes(g) ? 'bg-red-500 border-red-500 text-white shadow-xl scale-[0.98]' : isPreferred ? 'bg-gray-100 border-gray-100 text-gray-300' : 'bg-white border-gray-100 text-gray-500'}`}
                                                        >
                                                            #{label}
                                                        </button>
                                                    );
                                                })}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                <div className="mt-20 flex gap-4 justify-center"><button onClick={prevStep} className="px-16 py-5 bg-gray-100 text-gray-500 font-bold rounded-full uppercase">BACK</button><button onClick={nextStep} className="px-16 py-5 bg-primary text-white font-black rounded-full shadow-2xl uppercase">CONTINUE</button></div>
                            </div>
                        )}
                        {step === 3 && (
                            <div className="animate-up max-w-2xl mx-auto py-10 px-6">
                                <div className="text-center mb-12">
                                    <h2 className="text-3xl font-black mb-4 tracking-tight">{t.step3_title}</h2>
                                    <p className="text-gray-400 font-medium italic opacity-80 decoration-primary/30 decoration-2">{t.step3_desc || ""}</p>
                                </div>
                                <div className="space-y-8">
                                    <input
                                        type="text"
                                        value={favTitle}
                                        onChange={e => setFavTitle(e.target.value)}
                                        placeholder={t.step3_placeholder}
                                        className="w-full py-5 px-8 rounded-3xl bg-white border-2 border-gray-100 focus:border-primary focus:ring-4 focus:ring-primary/5 outline-none text-center text-lg shadow-sm transition-all font-bold placeholder:text-gray-200"
                                    />
                                    <div className="flex gap-3">
                                        <button onClick={prevStep} className="flex-1 py-4 bg-gray-50 text-gray-400 font-bold rounded-2xl hover:bg-gray-100 transition-all uppercase tracking-widest text-sm">BACK</button>
                                        <button
                                            onClick={handleAnalyze}
                                            disabled={!favTitle.trim()}
                                            className="flex-[2] py-4 bg-primary text-white font-black rounded-2xl shadow-xl hover:shadow-primary/20 hover:scale-[1.02] active:scale-95 transition-all uppercase tracking-widest disabled:opacity-20"
                                        >
                                            ANALYZE
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                        {step === 4 && (
                            <div className="animate-up">{loading ? (<div className="flex flex-col items-center justify-center py-40"><div className="w-16 h-16 border-[8px] border-gray-100 border-t-primary rounded-full animate-spin mb-10"></div><p className="text-gray-300 font-black tracking-widest uppercase animate-pulse">{t.computing}</p></div>) : (<div className="animate-up"><div className="text-center mb-14"><h2 className="text-3xl sm:text-4xl font-black mb-3 italic tracking-tight">{t.result_title}</h2><p className="text-gray-400 font-medium">{t.result_desc}</p></div><div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">{results.map((w, idx) => (<WebtoonCard key={w.id} item={w} rank={idx + 1} onDislike={toggleDislike} onLike={toggleLike} isLiked={likedIds.includes(w.id)} isDisliked={excludedIds.includes(w.id)} t={t} />))}</div><button onClick={reset} className="mt-24 px-16 py-6 border-2 border-gray-200 text-gray-300 font-black rounded-full hover:border-primary hover:text-primary transition-all uppercase block mx-auto tracking-widest text-sm">NEW SEARCH</button></div>)}</div>
                        )}
                    </main>
                    {showExcludePopup && (<div className="fixed bottom-10 left-1/2 -translate-x-1/2 z-[1000] animate-up"><div className="bg-gray-900/95 backdrop-blur-md text-white px-8 py-4 rounded-3xl shadow-2xl flex items-center gap-3"><span className="text-2xl">ðŸš«</span><p className="font-bold text-sm tracking-tight">{t.exclude_msg}</p></div></div>)}

                    {/* Conflict Confirmation Modal */}
                    {
                        conflictTag && (
                            <div className="fixed inset-0 z-[110000] flex items-center justify-center p-6 bg-black/40 backdrop-blur-sm">
                                <div className="bg-white w-full max-w-xs rounded-[40px] shadow-2xl overflow-hidden animate-up p-8 text-center">
                                    <span className="text-3xl mb-4 block">âš ï¸</span>
                                    <p className="text-gray-800 font-bold text-sm leading-relaxed mb-8 whitespace-pre-wrap">{t.conflict_msg}</p>
                                    <div className="flex gap-3">
                                        <button
                                            onClick={() => {
                                                setSelectedG(prev => prev.filter(it => it !== conflictTag));
                                                setExcludedG(prev => [...prev, conflictTag]);
                                                setConflictTag(null);
                                            }}
                                            className="flex-1 py-4 bg-primary text-white font-black rounded-2xl shadow-lg active:scale-95 transition-transform"
                                        >
                                            {t.yes}
                                        </button>
                                        <button
                                            onClick={() => setConflictTag(null)}
                                            className="flex-1 py-4 bg-gray-100 text-gray-500 font-bold rounded-2xl active:scale-95 transition-transform"
                                        >
                                            {t.no}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )
                    }

                    <ShareModal isOpen={showShareModal} onClose={() => setShowShareModal(false)} t={t} results={results} />

                    {/* Authentication Modal */}
                    {/* Authentication Modal */}
                    {showAuthModal && (
                        <div className="fixed inset-0 z-[120000] flex items-center justify-center p-6 bg-black/50 backdrop-blur-md" onClick={() => { setShowAuthModal(false); setAuthMode('login'); setEmail(''); setPassword(''); setConfirmPassword(''); }}>
                            <div className="bg-white w-full max-w-sm rounded-[48px] shadow-2xl overflow-hidden animate-up p-10 flex flex-col items-center" onClick={e => e.stopPropagation()}>
                                <h3 className="text-2xl font-black mb-8 tracking-tighter">{authMode === 'login' ? t.login : t.signup_btn}</h3>
                                <div className="w-full space-y-4">
                                    <div className="flex flex-col gap-3">
                                        <input
                                            type="email"
                                            value={email}
                                            onChange={e => setEmail(e.target.value)}
                                            placeholder={t.email}
                                            className="px-6 py-4 rounded-2xl bg-gray-50 border border-gray-100 outline-none focus:border-primary font-bold text-sm"
                                        />
                                        <input
                                            type="password"
                                            value={password}
                                            onChange={e => setPassword(e.target.value)}
                                            placeholder={t.password}
                                            className="px-6 py-4 rounded-2xl bg-gray-50 border border-gray-100 outline-none focus:border-primary font-bold text-sm"
                                        />
                                        {authMode === 'signup' && (
                                            <>
                                                <input
                                                    type="password"
                                                    value={confirmPassword}
                                                    onChange={e => setConfirmPassword(e.target.value)}
                                                    placeholder={t.password_confirm}
                                                    className="px-6 py-4 rounded-2xl bg-gray-50 border border-gray-100 outline-none focus:border-primary font-bold text-sm"
                                                />
                                                {password && password.length < 6 && <p className="text-[10px] font-bold text-red-500 px-2">{t.pw_criteria}</p>}
                                                {confirmPassword && password !== confirmPassword && <p className="text-[10px] font-bold text-red-500 px-2">{t.pw_mismatch}</p>}
                                            </>
                                        )}
                                    </div>

                                    {authMode === 'login' ? (
                                        <div className="flex flex-col gap-4">
                                            <button
                                                onClick={async () => {
                                                    const { error } = await supabase.auth.signInWithPassword({ email, password });
                                                    if (error) alert(t.login_error_msg || error.message); else setShowAuthModal(false);
                                                }}
                                                className="w-full py-4 bg-primary text-white font-black rounded-2xl shadow-lg active:scale-95 transition-transform"
                                            >
                                                {t.login_btn}
                                            </button>
                                            <button
                                                onClick={() => setAuthMode('signup')}
                                                className="text-center text-[11px] font-bold text-gray-400 hover:text-primary transition-colors"
                                            >
                                                {t.go_to_signup}
                                            </button>
                                            <button
                                                onClick={async () => {
                                                    if (!email) { alert("Please enter your email first"); return; }
                                                    const { error } = await supabase.auth.resetPasswordForEmail(email);
                                                    if (error) alert(error.message); else alert(t.reset_pw_msg);
                                                }}
                                                className="w-full text-center text-[11px] font-bold text-gray-400 hover:text-primary transition-colors pt-2 border-t border-gray-50 mt-2"
                                            >
                                                {t.find_pw}
                                            </button>
                                        </div>
                                    ) : (
                                        <div className="flex flex-col gap-4">
                                            <button
                                                disabled={!email || password.length < 6 || password !== confirmPassword}
                                                onClick={async () => {
                                                    const { error } = await supabase.auth.signUp({ email, password });
                                                    if (error) alert(error.message);
                                                    else {
                                                        alert(t.signup_confirm_msg);
                                                        setAuthMode('login');
                                                    }
                                                }}
                                                className="w-full py-4 bg-primary text-white font-black rounded-2xl shadow-lg active:scale-95 transition-transform disabled:opacity-30 disabled:pointer-events-none"
                                            >
                                                {t.signup_btn}
                                            </button>
                                            <button
                                                onClick={() => setAuthMode('login')}
                                                className="text-center text-[11px] font-bold text-gray-400 hover:text-primary transition-colors"
                                            >
                                                {t.go_to_login}
                                            </button>
                                        </div>
                                    )}
                                </div>
                                <button
                                    onClick={() => { setShowAuthModal(false); setAuthMode('login'); setEmail(''); setPassword(''); setConfirmPassword(''); }}
                                    className="mt-8 text-gray-400 font-bold text-xs uppercase"
                                >
                                    CLOSE
                                </button>
                            </div>
                        </div>
                    )}

                    {/* My Info Modal */}
                    {
                        showProfileModal && (
                            <div className="fixed inset-0 z-[120000] flex items-center justify-center p-6 bg-black/50 backdrop-blur-md" onClick={() => setShowProfileModal(false)}>
                                <div className="bg-white w-full max-w-2xl rounded-[48px] shadow-2xl overflow-hidden animate-up flex flex-col h-[80vh]" onClick={e => e.stopPropagation()}>
                                    <div className="p-10 pb-6 flex flex-col items-center flex-shrink-0">
                                        <h3 className="text-2xl font-black mb-6 tracking-tighter">{t.my_info}</h3>
                                        <div className="flex gap-2 p-1.5 bg-gray-100 rounded-2xl w-full">
                                            <button onClick={() => setProfileTab('liked')} className={`flex-1 py-3 px-4 rounded-xl font-bold text-sm transition-all ${profileTab === 'liked' ? 'bg-white text-primary shadow-sm' : 'text-gray-400 hover:text-gray-600'}`}>{t.liked_list}</button>
                                            <button onClick={() => setProfileTab('excluded')} className={`flex-1 py-3 px-4 rounded-xl font-bold text-sm transition-all ${profileTab === 'excluded' ? 'bg-white text-red-500 shadow-sm' : 'text-gray-400 hover:text-gray-600'}`}>{t.excluded_list}</button>
                                        </div>
                                    </div>
                                    <div className="flex-grow overflow-y-auto px-10 no-scrollbar">
                                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 pb-10">
                                            {(profileTab === 'liked' ? likedIds : excludedIds).length === 0 ? (
                                                <div className="col-span-full py-20 text-center text-gray-300 font-bold">{t.no_data}</div>
                                            ) : (
                                                (profileTab === 'liked' ? likedIds : excludedIds).map(id => {
                                                    const rawData = window.WEBTOON_DATA || MOCK_WEBTOONS;
                                                    const w = rawData.find(it => (it.titleId || it.id) == id);
                                                    if (!w) return null;
                                                    return (
                                                        <div key={id} className="flex gap-4 p-4 rounded-[28px] border border-gray-50 bg-gray-50/50 hover:bg-white hover:shadow-soft transition-all group">
                                                            <div className="w-16 h-20 rounded-xl overflow-hidden flex-shrink-0 bg-gray-100">
                                                                <img src={w.thumbnailUrl || w.thumbnail} referrerPolicy="no-referrer" className="w-full h-full object-cover" />
                                                            </div>
                                                            <div className="flex flex-col justify-center min-w-0 flex-grow">
                                                                <h4 className="font-extrabold text-gray-900 text-sm truncate tracking-tight">{w.titleName || w.title}</h4>
                                                                <p className="text-[10px] font-bold text-gray-400 uppercase mt-1">{(w.tags || []).slice(0, 2).join(' ')}</p>
                                                            </div>
                                                            <button
                                                                onClick={async () => {
                                                                    if (profileTab === 'liked') {
                                                                        await supabase.from('favorite_webtoons').delete().eq('user_id', user.id).eq('webtoon_id', id);
                                                                        setLikedIds(prev => prev.filter(it => it !== id));
                                                                    } else {
                                                                        await supabase.from('excluded_webtoons').delete().eq('user_id', user.id).eq('webtoon_id', id);
                                                                        setExcludedIds(prev => prev.filter(it => it !== id));
                                                                    }
                                                                }}
                                                                className="flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full bg-white text-gray-300 hover:text-red-500 shadow-sm transition-all"
                                                            >
                                                                <svg viewBox="0 0 24 24" className="w-4 h-4 fill-current"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
                                                            </button>
                                                        </div>
                                                    );
                                                })
                                            )}
                                        </div>
                                    </div>
                                    <div className="p-10 pt-6 border-t border-gray-50 flex flex-col gap-4 flex-shrink-0">
                                        <button
                                            onClick={async () => {
                                                if (confirm(t.delete_confirm)) {
                                                    // Note: Actual user deletion usually requires an edge function.
                                                    // Here we clear all their data as a "soft" deletion from the app perspective.
                                                    await supabase.from('favorite_webtoons').delete().eq('user_id', user.id);
                                                    await supabase.from('excluded_webtoons').delete().eq('user_id', user.id);
                                                    await supabase.auth.signOut();
                                                    alert("All data cleared. Your account is now inactive.");
                                                    setShowProfileModal(false);
                                                }
                                            }}
                                            className="text-[11px] font-bold text-gray-300 hover:text-red-400 transition-colors self-center uppercase border-b border-gray-100"
                                        >
                                            {t.delete_account}
                                        </button>
                                        <button onClick={() => setShowProfileModal(false)} className="w-full py-5 bg-gray-50 rounded-2xl text-gray-400 font-black uppercase">CLOSE</button>
                                    </div>
                                </div>
                            </div>
                        )
                    }
                </div >
            );
        };
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>
</body>

</html>